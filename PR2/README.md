# ĞÑĞ½Ğ¾Ğ²Ñ‹ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ R Ğ¸ Dplyr
vszub24@yandex.ru

## Ğ¦ĞµĞ»ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹

1.  Ğ Ğ°Ğ·Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ½Ğ°Ğ²Ñ‹ĞºĞ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ÑĞ·Ñ‹ĞºĞ° Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ R
    Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
2.  Ğ—Ğ°ĞºÑ€ĞµĞ¿Ğ¸Ñ‚ÑŒ Ğ·Ğ½Ğ°Ğ½Ğ¸Ñ Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ñ… Ñ‚Ğ¸Ğ¿Ğ¾Ğ² Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… ÑĞ·Ñ‹ĞºĞ° R
3.  Ğ Ğ°Ğ·Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ½Ğ°Ğ²Ñ‹ĞºĞ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
    Ğ¿Ğ°ĞºĞµÑ‚Ğ° dplyr â€“ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ select(), filter(), mutate(), arrange(),
    group_by()

## Ğ˜ÑÑ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ

1.  ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ½Ğ¾Ğµ Ğ¾Ğ±ĞµÑĞ¿ĞµÑ‡ĞµĞ½Ğ¸Ğµ ĞĞ¡ Windows 11 Pro
2.  RStudio
3.  Ğ˜Ğ½Ñ‚ĞµÑ€Ğ¿Ñ€ĞµÑ‚Ğ°Ñ‚Ğ¾Ñ€ ÑĞ·Ñ‹ĞºĞ° R 4.5.1

## ĞŸĞ»Ğ°Ğ½

1.  Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ñ‚ÑŒ Ğ¿Ğ°ĞºĞµÑ‚ dplyr.

2.  ĞŸÑ€Ğ¾Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ² Ğ¿Ğ°ĞºĞµÑ‚ dplyr Ğ½Ğ°Ğ±Ğ¾Ñ€ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… starwars Ñ
    Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ ÑĞ·Ñ‹ĞºĞ° R Ğ¸ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¸Ñ‚ÑŒ Ğ½Ğ° Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹:

    1\. Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚Ñ€Ğ¾Ğº Ğ² Ğ´Ğ°Ñ‚Ğ°Ñ„Ñ€ĞµĞ¹Ğ¼Ğµ?

    2\. Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚Ğ¾Ğ»Ğ±Ñ†Ğ¾Ğ² Ğ² Ğ´Ğ°Ñ‚Ğ°Ñ„Ñ€ĞµĞ¹Ğ¼Ğµ?

    3\. ĞšĞ°Ğº Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½Ñ‹Ğ¹ Ğ²Ğ¸Ğ´ Ğ´Ğ°Ñ‚Ğ°Ñ„Ñ€ĞµĞ¹Ğ¼Ğ°?

    4\. Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ñ… Ñ€Ğ°Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹ (species) Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ Ğ²
    Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…?

    5\. ĞĞ°Ğ¹Ñ‚Ğ¸ ÑĞ°Ğ¼Ğ¾Ğ³Ğ¾ Ğ²Ñ‹ÑĞ¾ĞºĞ¾Ğ³Ğ¾ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°.

    6\. ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ²ÑĞµÑ… Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹ Ğ½Ğ¸Ğ¶Ğµ 170

    7\. ĞŸĞ¾Ğ´ÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ˜ĞœĞ¢ (Ğ¸Ğ½Ğ´ĞµĞºÑ Ğ¼Ğ°ÑÑÑ‹ Ñ‚ĞµĞ»Ğ°) Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹. Ğ˜ĞœĞ¢
    Ğ¿Ğ¾Ğ´ÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¿Ğ¾ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»e$I=\frac{m}{h^2}$, Ğ³Ğ´Ğµ ğ‘š â€“ Ğ¼Ğ°ÑÑĞ° (weight), Ğ° â„
    â€“ Ñ€Ğ¾ÑÑ‚ (height).

    8\. ĞĞ°Ğ¹Ñ‚Ğ¸ 10 ÑĞ°Ğ¼Ñ‹Ñ… â€œĞ²Ñ‹Ñ‚ÑĞ½ÑƒÑ‚Ñ‹Ñ…â€ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹. â€œĞ’Ñ‹Ñ‚ÑĞ½ÑƒÑ‚Ğ¾ÑÑ‚ÑŒâ€ Ğ¾Ñ†ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾
    Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ñ Ğ¼Ğ°ÑÑÑ‹ (mass) Ğº Ñ€Ğ¾ÑÑ‚Ñƒ (height) Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹.

    9\. ĞĞ°Ğ¹Ñ‚Ğ¸ ÑÑ€ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ²Ğ¾Ğ·Ñ€Ğ°ÑÑ‚ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ñ€Ğ°ÑÑ‹ Ğ²ÑĞµĞ»ĞµĞ½Ğ½Ğ¾Ğ¹ Ğ—Ğ²ĞµĞ·Ğ´Ğ½Ñ‹Ñ…
    Ğ²Ğ¾Ğ¹Ğ½.

    10\. ĞĞ°Ğ¹Ñ‚Ğ¸ ÑĞ°Ğ¼Ñ‹Ğ¹ Ñ€Ğ°ÑĞ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ²ĞµÑ‚ Ğ³Ğ»Ğ°Ğ· Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹ Ğ²ÑĞµĞ»ĞµĞ½Ğ½Ğ¾Ğ¹
    Ğ—Ğ²ĞµĞ·Ğ´Ğ½Ñ‹Ñ… Ğ²Ğ¾Ğ¹Ğ½.

    11\. ĞŸĞ¾Ğ´ÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ ÑÑ€ĞµĞ´Ğ½ÑÑ Ğ´Ğ»Ğ¸Ğ½Ñƒ Ğ¸Ğ¼ĞµĞ½Ğ¸ Ğ² ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ñ€Ğ°ÑĞµ Ğ²ÑĞµĞ»ĞµĞ½Ğ½Ğ¾Ğ¹ Ğ—Ğ²ĞµĞ·Ğ´Ğ½Ñ‹Ñ…
    Ğ²Ğ¾Ğ¹Ğ½.

## Ğ¨Ğ°Ğ³Ğ¸:

### Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ¿Ğ°ĞºĞµÑ‚Ğ° dplyr, Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ´Ğ°Ñ‚Ğ°ÑĞµÑ‚Ğ°.

``` r
install.packages("dplyr")
```

> WARNING: Rtools is required to build R packages but is not currently
> installed. Please download and install the appropriate version of
> Rtools before proceeding:

https://cran.rstudio.com/bin/windows/Rtools/ Ğ£ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°Ñ Ğ¿Ğ°ĞºĞµÑ‚ Ğ²
â€˜D:/Rlibâ€™ (Ğ¿Ğ¾Ñ‚Ğ¾Ğ¼Ñƒ Ñ‡Ñ‚Ğ¾ â€˜libâ€™ Ğ½Ğµ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¾) Ğ¿Ñ€Ğ¾Ğ±ÑƒÑ URL
â€˜https://mirror.truenetwork.ru/CRAN/bin/windows/contrib/4.5/dplyr_1.1.4.zipâ€™
Content type â€˜application/zipâ€™ length 1593077 bytes (1.5 MB) downloaded
1.5 MB

Ğ¿Ğ°ĞºĞµÑ‚ â€˜dplyrâ€™ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ñ€Ğ°ÑĞ¿Ğ°ĞºĞ¾Ğ²Ğ°Ğ½, MD5-ÑÑƒĞ¼Ğ¼Ñ‹ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞµĞ½Ñ‹

Ğ¡ĞºĞ°Ñ‡Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ±Ğ¸Ğ½Ğ°Ñ€Ğ½Ñ‹Ğµ Ğ¿Ğ°ĞºĞµÑ‚Ñ‹ Ğ½Ğ°Ñ…Ğ¾Ğ´ÑÑ‚ÑÑ Ğ² D:\_packages \>  
library(dplyr)

ĞŸÑ€Ğ¸ÑĞ¾ĞµĞ´Ğ¸Ğ½ÑÑ Ğ¿Ğ°ĞºĞµÑ‚: â€˜dplyrâ€™

Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğµ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ñ‹ ÑĞºÑ€Ñ‹Ñ‚Ñ‹ Ğ¾Ñ‚ â€˜package:statsâ€™:

filter, lag

Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğµ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ñ‹ ÑĞºÑ€Ñ‹Ñ‚Ñ‹ Ğ¾Ñ‚ â€˜package:baseâ€™:

intersect, setdiff, setequal, union

``` r
data(starwars)
```

### ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ´Ğ°Ñ‚Ğ°ÑĞµÑ‚Ğ° Ğ¸ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹ Ğ½Ğ° Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹

#### Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚Ñ€Ğ¾Ğº Ğ² Ğ´Ğ°Ñ‚Ğ°Ñ„Ñ€ĞµĞ¹Ğ¼Ğµ?

``` r
nrow(starwars)
```

> \[1\] 87

#### Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚Ğ¾Ğ»Ğ±Ñ†Ğ¾Ğ² Ğ² Ğ´Ğ°Ñ‚Ğ°Ñ„Ñ€ĞµĞ¹Ğ¼Ğµ?

``` r
ncol(starwars)
```

> \[1\] 14

#### ĞšĞ°Ğº Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½Ñ‹Ğ¹ Ğ²Ğ¸Ğ´ Ğ´Ğ°Ñ‚Ğ°Ñ„Ñ€ĞµĞ¹Ğ¼Ğ°?

``` r
glimpse(starwars)
```

> Rows: 87 Columns: 14 $ name <chr> â€œLuke Skywalkerâ€, â€œC-3POâ€, â€œR2-D2â€,
> â€œDarth Vaderâ€, â€œLeia Organaâ€, â€œOwen Larsâ€, â€œBeru Whitesun â€¦ $ height
> <int> 172, 167, 96, 202, 150, 178, 165, 97, 183, 182, 188, 180, 228,
> 180, 173, 175, 170, 180, 66, 17â€¦ $ mass <dbl> 77.0, 75.0, 32.0, 136.0,
> 49.0, 120.0, 75.0, 32.0, 84.0, 77.0, 84.0, NA, 112.0, 80.0, 74.0, 135â€¦
> $ hair_color <chr>â€blondâ€, NA, NA, â€œnoneâ€, â€œbrownâ€, â€œbrown, greyâ€,
> â€œbrownâ€, NA, â€œblackâ€, â€œauburn, whiteâ€, â€œblondâ€¦ $ skin_color
> <chr>â€fairâ€, â€œgoldâ€, â€œwhite, blueâ€, â€œwhiteâ€, â€œlightâ€, â€œlightâ€,
> â€œlightâ€, â€œwhite, redâ€, â€œlightâ€, â€œfaiâ€¦ $ eye_color <chr>â€blueâ€,
> â€œyellowâ€, â€œredâ€, â€œyellowâ€, â€œbrownâ€, â€œblueâ€, â€œblueâ€, â€œredâ€, â€œbrownâ€,
> â€œblue-grayâ€, â€œblueâ€¦ $ birth_year <dbl> 19.0, 112.0, 33.0, 41.9, 19.0,
> 52.0, 47.0, NA, 24.0, 57.0, 41.9, 64.0, 200.0, 29.0, 44.0, 600.â€¦ $ sex
> <chr>â€maleâ€, â€œnoneâ€, â€œnoneâ€, â€œmaleâ€, â€œfemaleâ€, â€œmaleâ€, â€œfemaleâ€,
> â€œnoneâ€, â€œmaleâ€, â€œmaleâ€, â€œmaleâ€, â€œmâ€¦ $ gender <chr>â€masculineâ€,
> â€œmasculineâ€, â€œmasculineâ€, â€œmasculineâ€, â€œfeminineâ€, â€œmasculineâ€,
> â€œfeminineâ€, â€œmascâ€¦ $ homeworld <chr>â€Tatooineâ€, â€œTatooineâ€, â€œNabooâ€,
> â€œTatooineâ€, â€œAlderaanâ€, â€œTatooineâ€, â€œTatooineâ€, â€œTatooineâ€, â€œâ€¦ $
> species <chr>â€Humanâ€, â€œDroidâ€, â€œDroidâ€, â€œHumanâ€, â€œHumanâ€, â€œHumanâ€,
> â€œHumanâ€, â€œDroidâ€, â€œHumanâ€, â€œHumanâ€, â€œHumâ€¦ $ films <list> \<â€A New
> Hopeâ€, â€œThe Empire Strikes Backâ€, â€œReturn of the Jediâ€, â€œRevenge of
> the Sithâ€, â€œThe Fâ€¦ $ vehicles <list> \<â€Snowspeederâ€, â€œImperial
> Speeder Bikeâ€\>, \<\>, \<\>, \<\>, â€œImperial Speeder Bikeâ€, \<\>,
> \<\>, \<\>, \<\>â€¦ $ starships <list> \<â€œX-wingâ€, â€œImperial shuttleâ€\>,
> \<\>, \<\>, â€œTIE Advanced x1â€, \<\>, \<\>, \<\>, \<\>, â€œX-wingâ€,
> \<â€œJedi sâ€¦

#### Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ñ… Ñ€Ğ°Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹ (species) Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ Ğ² Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…?

``` r
starwars %\>% distinct(species) %\>% nrow()
```

> \[1\] 38

#### ĞĞ°Ğ¹Ñ‚Ğ¸ ÑĞ°Ğ¼Ğ¾Ğ³Ğ¾ Ğ²Ñ‹ÑĞ¾ĞºĞ¾Ğ³Ğ¾ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°.

``` r
starwars %\>%
  filter(height == max(height,na.rm = TRUE)) %\>%
  pull(name)
```

> \[1\] â€œYarael Poofâ€

#### ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ²ÑĞµÑ… Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹ Ğ½Ğ¸Ğ¶Ğµ 170

``` r
starwars %\>%
  filter(height \< 170) %\>%
  select(name, height) %\>%
  mutate(row_number = row_number())%\>%
  select(row_number, name, height) %\>%
  as.matrix() %\>%
  head(10)
```

> row_number name height  
> \[1,\] â€ 1â€ â€œC-3POâ€ â€œ167â€  
> \[2,\] â€ 2â€ â€œR2-D2â€ â€ 96â€  
> \[3,\] â€ 3â€ â€œLeia Organaâ€ â€œ150â€  
> \[4,\] â€ 4â€ â€œBeru Whitesun Larsâ€ â€œ165â€  
> \[5,\] â€ 5â€ â€œR5-D4â€ â€ 97â€  
> \[6,\] â€ 6â€ â€œYodaâ€ â€ 66â€  
> \[7,\] â€ 7â€ â€œMon Mothmaâ€ â€œ150â€  
> \[8,\] â€ 8â€ â€œWicket Systri Warrickâ€ â€ 88â€  
> \[9,\] â€ 9â€ â€œNien Nunbâ€ â€œ160â€  
> \[10,\] â€œ10â€ â€œWattoâ€ â€œ137â€

#### ĞŸĞ¾Ğ´ÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ˜ĞœĞ¢ (Ğ¸Ğ½Ğ´ĞµĞºÑ Ğ¼Ğ°ÑÑÑ‹ Ñ‚ĞµĞ»Ğ°) Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹. Ğ˜ĞœĞ¢ Ğ¿Ğ¾Ğ´ÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¿Ğ¾ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»e$I=\frac{m}{h^2}$, Ğ³Ğ´Ğµ ğ‘š â€“ Ğ¼Ğ°ÑÑĞ° (weight), Ğ° â„ â€“ Ñ€Ğ¾ÑÑ‚ (height).

``` r
starwars %\>%
  mutate(height_m = height / 100,bmi = mass / (height_m)\^2) %\>%
  select(name, mass, height, bmi) %\>%\
  as.matrix() %\>%\
  head(10)
```

> name mass height bmiÂ   
> \[1,\] â€œLuke Skywalkerâ€ â€ 77.0â€ â€œ172â€ â€ 26.02758â€  
> \[2,\] â€œC-3POâ€ â€ 75.0â€ â€œ167â€ â€ 26.89232â€  
> \[3,\] â€œR2-D2â€ â€ 32.0â€ â€ 96â€ â€ 34.72222â€  
> \[4,\] â€œDarth Vaderâ€ â€ 136.0â€ â€œ202â€ â€ 33.33007â€  
> \[5,\] â€œLeia Organaâ€ â€ 49.0â€ â€œ150â€ â€ 21.77778â€  
> \[6,\] â€œOwen Larsâ€ â€ 120.0â€ â€œ178â€ â€ 37.87401â€  
> \[7,\] â€œBeru Whitesun Larsâ€ â€ 75.0â€ â€œ165â€ â€ 27.54821â€  
> \[8,\] â€œR5-D4â€ â€ 32.0â€ â€ 97â€ â€ 34.00999â€  
> \[9,\] â€œBiggs Darklighterâ€ â€ 84.0â€ â€œ183â€ â€ 25.08286â€  
> \[10,\] â€œObi-Wan Kenobiâ€ â€ 77.0â€ â€œ182â€ â€ 23.24598â€  

#### ĞĞ°Ğ¹Ñ‚Ğ¸ 10 ÑĞ°Ğ¼Ñ‹Ñ… â€œĞ²Ñ‹Ñ‚ÑĞ½ÑƒÑ‚Ñ‹Ñ…â€ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹. â€œĞ’Ñ‹Ñ‚ÑĞ½ÑƒÑ‚Ğ¾ÑÑ‚ÑŒâ€ Ğ¾Ñ†ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ñ Ğ¼Ğ°ÑÑÑ‹ (mass) Ğº Ñ€Ğ¾ÑÑ‚Ñƒ (height) Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹.

``` r
starwars %\>% 
 mutate(stretch_ratio = mass / height) %\>%
 filter(!is.na(stretch_ratio)) %\>%
 arrange(desc(stretch_ratio)) %\>%
 head(10) %\>%
 select(name, mass, height, stretch_ratio) %\>%
 mutate(row_number = row_number()) %\>%
 select(row_number, name, mass, height, stretch_ratio) %\>%
 as.matrix()
```

> row_number name mass height stretch_ratio  
> \[1,\] â€ 1â€ â€œJabba Desilijic Tiureâ€ â€œ1358â€ â€œ175â€ â€œ7.7600000â€Â   
> \[2,\] â€ 2â€ â€œGrievousâ€ â€ 159â€ â€œ216â€ â€œ0.7361111â€Â   
> \[3,\] â€ 3â€ â€œIG-88â€ â€ 140â€ â€œ200â€ â€œ0.7000000â€  
> \[4,\] â€ 4â€ â€œOwen Larsâ€ â€ 120â€ â€œ178â€ â€œ0.6741573â€Â   
> \[5,\] â€ 5â€ â€œDarth Vaderâ€ â€ 136â€ â€œ202â€ â€œ0.6732673â€Â   
> \[6,\] â€ 6â€ â€œJek Tono Porkinsâ€ â€ 110â€ â€œ180â€ â€œ0.6111111â€Â   
> \[7,\] â€ 7â€ â€œBosskâ€ â€ 113â€ â€œ190â€ â€œ0.5947368â€Â   
> \[8,\] â€ 8â€ â€œTarffulâ€ â€ 136â€ â€œ234â€ â€œ0.5811966â€Â   
> \[9,\] â€ 9â€ â€œDexter Jettsterâ€ â€ 102â€ â€œ198â€ â€œ0.5151515â€Â   
> \[10,\] â€œ10â€ â€œChewbaccaâ€ â€ 112â€ â€œ228â€ â€œ0.4912281â€Â 

#### ĞĞ°Ğ¹Ñ‚Ğ¸ ÑÑ€ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ²Ğ¾Ğ·Ñ€Ğ°ÑÑ‚ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ñ€Ğ°ÑÑ‹ Ğ²ÑĞµĞ»ĞµĞ½Ğ½Ğ¾Ğ¹ Ğ—Ğ²ĞµĞ·Ğ´Ğ½Ñ‹Ñ… Ğ²Ğ¾Ğ¹Ğ½.

``` r
starwars %\>%
 mutate(current_year = 100,age = current_year + birth_year) %\>%
 filter(!is.na(age) & !is.na(species)) %\>%
 group_by(species) %\>%
 summarise(average_age = mean(age),count = n()) %\>%Â  + arrange(desc(average_age)) %\>%
 mutate(row_number = row_number()) %\>%
 select(row_number, species, average_age, count) %\>%
 as.matrix()
```

> row_number species average_age count  
> \[1,\] â€ 1â€ â€œYodaâ€™s speciesâ€ â€œ996.0000â€ â€ 1â€  
> \[2,\] â€ 2â€ â€œHuttâ€ â€œ700.0000â€ â€ 1â€Â   
> \[3,\] â€ 3â€ â€œWookieeâ€ â€œ300.0000â€ â€ 1â€Â   
> \[4,\] â€ 4â€ â€œCereanâ€ â€œ192.0000â€ â€ 1â€Â   
> \[5,\] â€ 5â€ â€œZabrakâ€ â€œ154.0000â€ â€ 1â€Â   
> \[6,\] â€ 6â€ â€œHumanâ€ â€œ153.7423â€ â€œ26â€Â   
> \[7,\] â€ 7â€ â€œDroidâ€ â€œ153.3333â€ â€ 3â€Â   
> \[8,\] â€ 8â€ â€œTrandoshanâ€ â€œ153.0000â€ â€ 1â€Â   
> \[9,\] â€ 9â€ â€œGunganâ€ â€œ152.0000â€ â€ 1â€Â   
> \[10,\] â€œ10â€ â€œMirialanâ€ â€œ149.0000â€ â€ 2â€  
> \[11,\] â€œ11â€ â€œTwiâ€™lekâ€ â€œ148.0000â€ â€ 1â€Â   
> \[12,\] â€œ12â€ â€œRodianâ€ â€œ144.0000â€ â€ 1â€Â   
> \[13,\] â€œ13â€ â€œMon Calamariâ€ â€œ141.0000â€ â€ 1â€Â   
> \[14,\] â€œ14â€ â€œKel Dorâ€ â€œ122.0000â€ â€ 1â€Â   
> \[15,\] â€œ15â€ â€œEwokâ€ â€œ108.0000â€ â€ 1â€Â 

#### ĞĞ°Ğ¹Ñ‚Ğ¸ ÑĞ°Ğ¼Ñ‹Ğ¹ Ñ€Ğ°ÑĞ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ²ĞµÑ‚ Ğ³Ğ»Ğ°Ğ· Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹ Ğ²ÑĞµĞ»ĞµĞ½Ğ½Ğ¾Ğ¹ Ğ—Ğ²ĞµĞ·Ğ´Ğ½Ñ‹Ñ… Ğ²Ğ¾Ğ¹Ğ½.

``` r
starwars %\>%
 count(eye_color, sort = TRUE) %\>%
 filter(!is.na(eye_color)) %\>%
 slice(1) %\>%
 pull(eye_color)
```

> \[1\] â€œbrownâ€

#### ĞŸĞ¾Ğ´ÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ ÑÑ€ĞµĞ´Ğ½ÑÑ Ğ´Ğ»Ğ¸Ğ½Ñƒ Ğ¸Ğ¼ĞµĞ½Ğ¸ Ğ² ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ñ€Ğ°ÑĞµ Ğ²ÑĞµĞ»ĞµĞ½Ğ½Ğ¾Ğ¹ Ğ—Ğ²ĞµĞ·Ğ´Ğ½Ñ‹Ñ… Ğ²Ğ¾Ğ¹Ğ½.

``` r
starwars %\>%
  mutate(name_length = nchar(name)) %\>%
  filter(!is.na(species)) %\>%
  group_by(species) %\>%
  summarise(avg_name_length = mean(name_length, na.rm = TRUE),count = n()) %\>%
  arrange(desc(avg_name_length)) %\>%
  mutate(row_number = row_number()) %\>%
  select(row_number, species, avg_name_length, count) %\>%
  as.matrix()
```

> row_number species avg_name_length count  
> \[1,\] â€ 1â€ â€œEwokâ€ â€œ21.000000â€ â€ 1â€Â   
> \[2,\] â€ 2â€ â€œHuttâ€ â€œ21.000000â€ â€ 1â€Â   
> \[3,\] â€ 3â€ â€œGeonosianâ€ â€œ17.000000â€ â€ 1â€Â   
> \[4,\] â€ 4â€ â€œBesaliskâ€ â€œ15.000000â€ â€ 1â€Â   
> \[5,\] â€ 5â€ â€œMirialanâ€ â€œ14.000000â€ â€ 2â€  
> \[6,\] â€ 6â€ â€œToongâ€ â€œ14.000000â€ â€ 1â€Â   
> \[7,\] â€ 7â€ â€œAleenaâ€ â€œ12.000000â€ â€ 1â€Â   
> \[8,\] â€ 8â€ â€œCereanâ€ â€œ12.000000â€ â€ 1â€Â   
> \[9,\] â€ 9â€ â€œGunganâ€ â€œ11.666667â€ â€ 3â€Â   
> \[10,\] â€œ10â€ â€œHumanâ€ â€œ11.342857â€ â€œ35â€Â   
> \[11,\] â€œ11â€ â€œIktotchiâ€ â€œ11.000000â€ â€ 1â€Â   
> \[12,\] â€œ12â€ â€œNeimodianâ€ â€œ11.000000â€ â€ 1â€Â   
> \[13,\] â€œ13â€ â€œQuermianâ€ â€œ11.000000â€ â€ 1â€Â   
> \[14,\] â€œ14â€ â€œTwiâ€™lekâ€ â€œ11.000000â€ â€ 2â€Â   
> \[15,\] â€œ15â€ â€œChagrianâ€ â€œ10.000000â€ â€ 1â€Â   
> \[11,\] â€œ11â€ â€œIktotchiâ€ â€œ11.000000â€ â€ 1â€Â   
> \[12,\] â€œ12â€ â€œNeimodianâ€ â€œ11.000000â€ â€ 1â€Â   
> \[13,\] â€œ13â€ â€œQuermianâ€ â€œ11.000000â€ â€ 1â€Â   
> \[14,\] â€œ14â€ â€œTwiâ€™lekâ€ â€œ11.000000â€ â€ 2â€Â   
> \[15,\] â€œ15â€ â€œChagrianâ€ â€œ10.000000â€ â€ 1â€Â   
> \[16,\] â€œ16â€ â€œClawditeâ€ â€œ10.000000â€ â€ 1â€Â   
> \[17,\] â€œ17â€ â€œPauâ€™anâ€ â€œ10.000000â€ â€ 1â€Â   
> \[18,\] â€œ18â€ â€œSkakoanâ€ â€œ10.000000â€ â€ 1â€Â   
> \[19,\] â€œ19â€ â€œTholothianâ€ â€œ10.000000â€ â€ 1â€Â   
> \[20,\] â€œ20â€ â€œZabrakâ€ â€ 9.500000â€ â€ 2â€Â   
> \[21,\] â€œ21â€ â€œNautolanâ€ â€ 9.000000â€ â€ 1â€Â   
> \[22,\] â€œ22â€ â€œSullustanâ€ â€ 9.000000â€ â€ 1â€Â   
> \[23,\] â€œ23â€ â€œKaleeshâ€ â€ 8.000000â€ â€ 1â€Â   
> \[24,\] â€œ24â€ â€œKel Dorâ€ â€ 8.000000â€ â€ 1â€Â   
> \[25,\] â€œ25â€ â€œMuunâ€ â€ 8.000000â€ â€ 1â€Â   
> \[26,\] â€œ26â€ â€œTogrutaâ€ â€ 8.000000â€ â€ 1â€Â   
> \[27,\] â€œ27â€ â€œVulptereenâ€ â€ 8.000000â€ â€ 1â€Â   
> \[28,\] â€œ28â€ â€œWookieeâ€ â€ 8.000000â€ â€ 2â€Â   
> \[29,\] â€œ29â€ â€œDugâ€ â€ 7.000000â€ â€ 1â€Â   
> \[30,\] â€œ30â€ â€œKaminoanâ€ â€ 7.000000â€ â€ 2â€Â   
> \[31,\] â€œ31â€ â€œXextoâ€ â€ 7.000000â€ â€ 1â€Â   
> \[32,\] â€œ32â€ â€œMon Calamariâ€ â€ 6.000000â€ â€ 1â€Â   
> \[33,\] â€œ33â€ â€œRodianâ€ â€ 6.000000â€ â€ 1â€Â   
> \[34,\] â€œ34â€ â€œToydarianâ€ â€ 5.000000â€ â€ 1â€Â   
> \[35,\] â€œ35â€ â€œTrandoshanâ€ â€ 5.000000â€ â€ 1â€Â   
> \[36,\] â€œ36â€ â€œDroidâ€ â€ 4.833333â€ â€ 6â€Â   
> \[37,\] â€œ37â€ â€œYodaâ€™s speciesâ€ â€ 4.000000â€ â€ 1â€Â   

## ĞÑ†ĞµĞ½ĞºĞ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²

Ğ’ Ğ´Ğ°Ğ½Ğ½Ğ¾Ğ¹ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ Ğ¼Ñ‹ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¸ Ğ·Ğ½Ğ°Ğ½Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ½Ñ‹Ğµ Ğ² Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğµ
Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¹ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ¼Ğ°ÑÑĞ¸Ğ²Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ….

## Ğ’Ñ‹Ğ²Ğ¾Ğ´

Ğ¢Ğ°ĞºĞ¸Ğ¼ Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ¼, Ğ¼Ñ‹ Ñ€Ğ°Ğ·Ğ²Ğ¸Ğ»Ğ¸ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ½Ğ°Ğ²Ñ‹ĞºĞ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹
Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ°ĞºĞµÑ‚Ğ° dplyr â€“ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ select(), filter(), mutate(),
arrange(), group_by()
